# ✅交易模块设计



交易模块，是一个业务模块，他自己不会产生业务单据，但是他会编排其他的几个模块，比如订单、商品、库存、用户等模块，他的主要职责就是完成用户的下单交易过程。



﻿



﻿

![img](https://cdn.nlark.com/yuque/0/2024/png/5378072/1718107943564-f26b19e7-f474-4a5a-99c2-ac10fb3c455e.png)



﻿



他和订单、支付模块的区别：



﻿



- 

	交易模块是对客的，而订单、支付模块不直接对客，通过交易模块对客

- 

	也就意味着，交易模块中提供 controller 供用户访问，但是订单、支付不提供给用户访问的 controller，只提供 Dubbo 接口对外提供调用。

- 

	这么做的好处是订单和支付就可以更加聚焦自己的业务逻辑，至于前面的各种展示逻辑（比如 PC 端、手机端真实内容不一样，支付方式可能不一样）、组装逻辑（有的订单需要支付，有的订单可能不需要，比如后面我们会做的空投玩法）他们都不需要关心。



﻿



交易模块中提供了几个核心的方法，如 buy、pay以及 cancel，分别是下单、支付以及取消订单。



﻿



### 时序图



﻿



﻿

![img](https://cdn.nlark.com/yuque/__puml/d2b83ac213a801cc5f7a0694076ab599.svg)



﻿



交易模块自己没有做数据存储，他主要的职责还是编排各个原子模块完成交易相关的支付、下单等动作。如果后面我们做了延迟营销，那么交易模块也会去编排营销。